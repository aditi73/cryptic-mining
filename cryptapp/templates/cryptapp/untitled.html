{% extends "cryptapp/base.html" %}
{% load staticfiles %}

{% block content %}
 <!-- Start System Section -->
        <div class="section-modal">
            <div class="modal-content">
                <a href="/"><div class="close-modal" data-dismiss="modal">
                    <div class="lr">
                        <div class="rl">
                        </div>
                    </div>
                </div>
                </a>
                
                <div class="container">
                    <div class="row">
                        <div class="section-title text-center">
                            <h3>System</h3>
                            
                        </div>
                    <br><br>
                    
                        <div class = "row">
                        <div class="col-md-8 col-md-offset-4 col-xs-8 col-xs-offset-4">

                            <form action = "/system/" id="SystemForm" method="GET">{% csrf_token %}


                                <!-- <div class = "row form-group">
                                    <label class="label-control"  for="cipher">Input</label>
                                </div>
                                
                                <div class ="row">    
                                    <div class="form-group col-md-7 col-xs-9">
                                        
                                        {{form.cipher}}
                                        <p class="help-block text-danger"></p>
                                    </div>
                                </div> -->

                                
                            
                                <div class = "row form-group">
                                    <label class="label-control"  for="cipher">Cipher Text</label>
                                </div>
                                
                                <div class ="row">    
                                    <div class="form-group col-md-7">
                                         <!-- <input type="text" class="form-control" placeholder="Encrypted text here *" id="cipher" required data-validation-required-message="Please enter some text."> -->
                                        <input id="cipher" name="cipher" type="text" value="{{ form.cipher.value }}">
                                        <p class="help-block text-danger"></p>
                                    </div>
                                </div>

                                <div class = "row form-group">
                                    <label class="label-control"  for="result">Result</label>
                                </div>    
                                <div class="row">
                                    <div class="form-group col-md-7" >
                                           <textarea class="form-control" id="result" readonly="readonly"></textarea>
                                        {{form.result }}
                                        <p class="help-block text-danger" ></p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                    <div class="col-lg-12 text-center">
                                        <div id="success"></div>
                                        <button type="submit" class="btn btn-primary" id="click">Decrypt</button>
                                        <button class="btn btn-primary" type="reset">Reset</button>
                                    </div>
                                <script type="text/javascript" src="{% static 'js/jquery-2.1.1.min.js' %}"></script>
                                <script>
                                    
                                    // alert(ctext);
                                    
                                    $("#click").click(function (e) {
                                        var frm = $('#SystemForm');
                                        e.preventDefault();
                                        //var ctext = $('#cipher').val();
                                        $.ajax({
                                            type: "GET",
                                            //url:'/result/',
                                            data: {ctext:$('#cipher').val()},
                                            dataType: "json", 
                                            success: function (data) {
                                                ($("#result").html(data));
                                            },
                                            error: function(data) {
                                                $("#result").html("Something went wrong!");
                                            }
                                        });
                        
                                    });    
                                </script>
                                
                                
                               <br><br><br><br> 
                            </form>
                        </div>
                    </div>
                    </div>
                    </div>
                </div>
                
            </div>
        
        <!-- End System Section -->
}
{% endblock content %}